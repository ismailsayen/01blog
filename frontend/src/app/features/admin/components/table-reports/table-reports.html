<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">id</th>
      <th scope="col">Reported user</th>
      <th scope="col">Reason</th>
      <th scope="col">TargetType</th>
      <th scope="col">ReportedAt</th>
      <th scope="col">Status</th>
      <th scope="col">Action</th>

    </tr>
  </thead>
  <tbody>

    @for (report of reports(); track $index) {
    <tr>
      <th scope="row">{{report.id}}</th>
      <td>{{report.userName}} {{report.targetId}}</td>
      <td>{{report.reason}}</td>
      <td>
        @if (report.targetType === "BLOG") {
        <a [routerLink]="['/blog', report.targetId]">{{ report.targetType }}</a>
        } @else {
        <a [routerLink]="['/profile', report.targetId]">{{ report.targetType }}</a>
        }
      </td>
      <td class="text-muted">{{report.reportedAt}}</td>
      <td>@if (report.resolved) {
        <span class="status resolved text-primary">Resolved</span>
        }@else {
        <span class="status ">Pending</span>
        }
      </td>
      <td>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dropdown-toggle"
          type="button" data-bs-toggle="dropdown" aria-expanded="false">
          <circle cx="12" cy="12" r="1"></circle>
          <circle cx="12" cy="5" r="1"></circle>
          <circle cx="12" cy="19" r="1"></circle>
        </svg>

        <ul class="dropdown-menu">

          <li>
            <button class="dropdown-item d-flex align-items-center gap-2" [disabled]="report.resolved"
              (click)="reportsService.showConfirmAction(report.id,'report',report.targetType,'Resolve')">
              <i class="bi bi-check2-circle"></i><span>Resolve report</span>
            </button>
          </li>

          <li>
            <button class="dropdown-item d-flex align-items-center gap-2"
              (click)="reportsService.showConfirmAction(report.id,'report',report.targetType,'Delete')">
              <i class="bi bi-x-circle"></i><span>Dismiss report</span>
            </button>
          </li>

        </ul>
      </td>
    </tr>
    }@empty {
    <p class="fw-bold text-center">No Reports Found.</p>
    }
    @if(reportsService.ConfirmAction() && reportsService.action()==='Resolve'){
    <app-confirmation-pop-up (confirm)="ResolveReport()" />
    }
    @if(reportsService.ConfirmAction() && reportsService.action()==='Delete'){
    <app-confirmation-pop-up (confirm)="deleteReport()" />
    }
  </tbody>
</table>
